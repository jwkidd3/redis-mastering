<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/theme/white.css">
    <style>
        .reveal h1, .reveal h2, .reveal h3 {
            text-transform: none;
            font-weight: 600;
        }
        .reveal .slides section {
            text-align: left;
            padding: 20px;
        }
        .title-slide {
            background-color: #f8f9fa;
            color: #333;
            text-align: center;
            padding: 40px;
        }
        .section-header {
            background-color: #f8f9fa;
            color: #333;
            text-align: center;
            padding: 30px;
        }
        .lab-callout {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 40px;
            border-radius: 10px;
        }
        .highlight-box {
            background-color: #e8f4fd;
            border-left: 4px solid #007acc;
            padding: 15px;
            margin: 15px 0;
        }
        .code-snippet {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        ul, ol {
            font-size: 0.9em;
            line-height: 1.4;
        }
        .reveal .slides section .fragment {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <!-- Title Slide -->
            <section class="title-slide">
                <h1>Core Data Structures for Systems</h1>
                <h3>Content 3: String Operations & Key Management</h3>
                <p><strong>Duration:</strong> 45 minutes</p>
                <p><strong>Focus:</strong> CLI-based operations for data handling</p>
            </section>

            <!-- Section 1: String Fundamentals -->
            <section class="section-header">
                <h2>String Data Structure Fundamentals</h2>
                <p>Building blocks for data storage and manipulation</p>
            </section>

            <section>
                <h3>What are Redis Strings?</h3>
                <div class="highlight-box">
                    <p><strong>Binary-safe sequences</strong> that can store any data type</p>
                </div>
                <ul>
                    <li class="fragment">Policy numbers and customer IDs</li>
                    <li class="fragment">JSON documents for customer profiles</li>
                    <li class="fragment">Numeric values for premiums and claims</li>
                    <li class="fragment">Binary data like document attachments</li>
                    <li class="fragment">Maximum size: 512 MB per string</li>
                </ul>
            </section>

            <section>
                <h3>Basic String Operations</h3>
                <div class="code-snippet">
                    SET customer:12345 "John Smith"<br>
                    GET customer:12345<br>
                    EXISTS customer:12345<br>
                    DEL customer:12345
                </div>
                <div class="highlight-box">
                    <p><strong>Atomic operations</strong> ensure data consistency</p>
                </div>
            </section>

            <section>
                <h3>Setting Values with Options</h3>
                <div class="code-snippet">
                    SET policy:67890 "active" EX 3600<br>
                    SET session:token "xyz123" NX<br>
                    SET counter:claims 0 XX
                </div>
                <ul>
                    <li><strong>EX</strong> - Expiration in seconds</li>
                    <li><strong>NX</strong> - Only if key doesn't exist</li>
                    <li><strong>XX</strong> - Only if key exists</li>
                </ul>
            </section>

            <!-- Section 2: Numeric Operations -->
            <section class="section-header">
                <h2>Numeric Operations</h2>
                <p>Mathematical operations on string values</p>
            </section>

            <section>
                <h3>Increment and Decrement</h3>
                <div class="code-snippet">
                    SET premium:policy123 1200<br>
                    INCR premium:policy123<br>
                    DECR premium:policy123<br>
                    INCRBY premium:policy123 50<br>
                    DECRBY premium:policy123 25
                </div>
                <div class="highlight-box">
                    <p>Perfect for counters, scores, and financial calculations</p>
                </div>
            </section>

            <section>
                <h3>Floating Point Operations</h3>
                <div class="code-snippet">
                    SET deductible:auto 500.00<br>
                    INCRBYFLOAT deductible:auto 25.50<br>
                    INCRBYFLOAT deductible:auto -10.25
                </div>
                <ul>
                    <li>Precise decimal calculations</li>
                    <li>Maintains floating point accuracy</li>
                    <li>Essential for financial calculations</li>
                </ul>
            </section>

            <!-- Section 3: String Manipulation -->
            <section class="section-header">
                <h2>String Manipulation</h2>
                <p>Advanced text processing operations</p>
            </section>

            <section>
                <h3>Append and Length Operations</h3>
                <div class="code-snippet">
                    SET notes:claim456 "Initial assessment"<br>
                    APPEND notes:claim456 " - requires review"<br>
                    STRLEN notes:claim456
                </div>
                <div class="highlight-box">
                    <p>Build dynamic content efficiently</p>
                </div>
            </section>

            <section>
                <h3>Range Operations</h3>
                <div class="code-snippet">
                    SET policy:document "POL-2024-001-COMP"<br>
                    GETRANGE policy:document 0 2<br>
                    GETRANGE policy:document 4 7<br>
                    SETRANGE policy:document 9 "002"
                </div>
                <ul>
                    <li>Extract specific portions of data</li>
                    <li>Modify parts of existing strings</li>
                    <li>Zero-based indexing</li>
                </ul>
            </section>

            <!-- Section 4: Batch Operations -->
            <section class="section-header">
                <h2>Batch Operations</h2>
                <p>Efficient multi-key operations</p>
            </section>

            <section>
                <h3>Multiple Set and Get</h3>
                <div class="code-snippet">
                    MSET customer:name "Jane Doe" customer:age 35<br>
                    MGET customer:name customer:age customer:policy
                </div>
                <div class="highlight-box">
                    <p><strong>Network optimization:</strong> Reduce round-trip latency</p>
                </div>
            </section>

            <section>
                <h3>Conditional Multi-Set</h3>
                <div class="code-snippet">
                    MSETNX user:1001 "active" user:1002 "pending"
                </div>
                <ul>
                    <li>Sets multiple keys only if <strong>none</strong> exist</li>
                    <li>Atomic operation - all or nothing</li>
                    <li>Prevents overwriting existing data</li>
                </ul>
            </section>

            <!-- Section 5: Key Management -->
            <section class="section-header">
                <h2>Key Management Strategies</h2>
                <p>Organizing and maintaining your data structure</p>
            </section>

            <section>
                <h3>Key Naming Conventions</h3>
                <div class="code-snippet">
                    customer:12345:profile<br>
                    policy:auto:67890:premium<br>
                    claim:2024:001:status<br>
                    session:user:token:abc123
                </div>
                <div class="highlight-box">
                    <p><strong>Hierarchical structure</strong> improves organization and searchability</p>
                </div>
            </section>

            <section>
                <h3>Key Inspection Commands</h3>
                <div class="code-snippet">
                    KEYS customer:*<br>
                    SCAN 0 MATCH policy:auto:*<br>
                    TYPE customer:12345<br>
                    OBJECT ENCODING customer:12345
                </div>
                <ul>
                    <li><strong>KEYS</strong> - Development only (blocking)</li>
                    <li><strong>SCAN</strong> - Production safe iteration</li>
                    <li><strong>TYPE</strong> - Data structure identification</li>
                </ul>
            </section>

            <!-- Section 6: TTL Strategies -->
            <section class="section-header">
                <h2>Time-To-Live (TTL) Strategies</h2>
                <p>Automatic data expiration and cleanup</p>
            </section>

            <section>
                <h3>Setting Expiration</h3>
                <div class="code-snippet">
                    EXPIRE session:token 1800<br>
                    EXPIREAT temp:quote 1640995200<br>
                    PEXPIRE cache:data 60000<br>
                    PEXPIREAT temp:calc 1640995200000
                </div>
                <ul>
                    <li><strong>EXPIRE</strong> - Seconds from now</li>
                    <li><strong>EXPIREAT</strong> - Unix timestamp</li>
                    <li><strong>P variants</strong> - Millisecond precision</li>
                </ul>
            </section>

            <section>
                <h3>TTL Inspection and Management</h3>
                <div class="code-snippet">
                    TTL session:token<br>
                    PTTL cache:data<br>
                    PERSIST session:token<br>
                    TOUCH active:users:list
                </div>
                <ul>
                    <li><strong>TTL returns:</strong> -2 (expired), -1 (no TTL), positive (seconds left)</li>
                    <li><strong>PERSIST</strong> - Remove expiration</li>
                    <li><strong>TOUCH</strong> - Update last accessed time</li>
                </ul>
            </section>

            <!-- Section 7: Memory Optimization -->
            <section class="section-header">
                <h2>Memory Optimization</h2>
                <p>Efficient storage for large datasets</p>
            </section>

            <section>
                <h3>String Encoding Types</h3>
                <div class="highlight-box">
                    <p>Redis automatically optimizes string storage</p>
                </div>
                <ul>
                    <li><strong>int:</strong> Numbers fitting in long range</li>
                    <li><strong>embstr:</strong> Strings â‰¤ 44 bytes</li>
                    <li><strong>raw:</strong> Larger strings with separate allocation</li>
                </ul>
            </section>

            <section>
                <h3>Memory Usage Analysis</h3>
                <div class="code-snippet">
                    MEMORY USAGE customer:12345<br>
                    OBJECT ENCODING customer:12345<br>
                    DEBUG OBJECT customer:12345
                </div>
                <ul>
                    <li>Monitor memory consumption per key</li>
                    <li>Understand internal representations</li>
                    <li>Optimize data structures</li>
                </ul>
            </section>

            <!-- Section 8: Performance Considerations -->
            <section class="section-header">
                <h2>Performance Considerations</h2>
                <p>Best practices for high-performance applications</p>
            </section>

            <section>
                <h3>Operation Complexity</h3>
                <div class="highlight-box">
                    <p>Most string operations are <strong>O(1)</strong> time complexity</p>
                </div>
                <ul>
                    <li><strong>SET, GET, INCR:</strong> O(1) - Constant time</li>
                    <li><strong>APPEND:</strong> O(1) - Amortized</li>
                    <li><strong>SETRANGE, GETRANGE:</strong> O(1) for small ranges</li>
                    <li><strong>STRLEN:</strong> O(1) - Length is cached</li>
                </ul>
            </section>

            <section>
                <h3>Batch Operation Benefits</h3>
                <div class="code-snippet">
                    # Instead of multiple round trips:<br>
                    SET key1 value1<br>
                    SET key2 value2<br>
                    SET key3 value3<br><br>
                    # Use single batch operation:<br>
                    MSET key1 value1 key2 value2 key3 value3
                </div>
                <div class="highlight-box">
                    <p><strong>Network efficiency:</strong> Reduce latency with fewer round trips</p>
                </div>
            </section>

            <!-- Section 9: Common Patterns -->
            <section class="section-header">
                <h2>Common Application Patterns</h2>
                <p>Real-world string usage scenarios</p>
            </section>

            <section>
                <h3>Caching Pattern</h3>
                <div class="code-snippet">
                    # Check cache first<br>
                    cached_result = GET cache:expensive_query<br>
                    if cached_result is None:<br>
                        result = expensive_database_query()<br>
                        SET cache:expensive_query result EX 300<br>
                        return result<br>
                    return cached_result
                </div>
            </section>

            <section>
                <h3>Counter Pattern</h3>
                <div class="code-snippet">
                    # Daily visit counter<br>
                    INCR visits:2024-01-15<br>
                    EXPIRE visits:2024-01-15 86400<br><br>
                    # Rate limiting<br>
                    requests = INCR rate_limit:user:123<br>
                    if requests == 1:<br>
                        EXPIRE rate_limit:user:123 3600<br>
                    if requests > 100:<br>
                        return "Rate limit exceeded"
                </div>
            </section>

            <section>
                <h3>Session Management</h3>
                <div class="code-snippet">
                    # Store session data<br>
                    SET session:abc123 '{"user_id": 456, "role": "admin"}'<br>
                    EXPIRE session:abc123 1800<br><br>
                    # Validate session<br>
                    session_data = GET session:abc123<br>
                    if session_data:<br>
                        EXPIRE session:abc123 1800  # Refresh TTL<br>
                        return parse_json(session_data)
                </div>
            </section>

            <!-- Lab Callout Slide -->
            <section class="lab-callout">
                <h2>ðŸ§ª Hands-On Practice Time</h2>
                <h3>Labs 4-5: Data Management & Monitoring</h3>
                <p><strong>Duration:</strong> 90 minutes total</p>
                <div style="margin-top: 30px;">
                    <p><strong>Lab 4:</strong> Key Management & TTL Strategies (45 min)</p>
                    <p><strong>Lab 5:</strong> Advanced CLI Operations & Monitoring (45 min)</p>
                </div>
                <p style="margin-top: 30px;"><em>Apply string operations in real-world scenarios</em></p>
            </section>

            <!-- Summary -->
            <section class="section-header">
                <h2>Key Takeaways</h2>
                <p>Essential string operations for data systems</p>
            </section>

            <section>
                <h3>What We've Covered</h3>
                <ul>
                    <li class="fragment"><strong>String fundamentals</strong> - Binary-safe data storage</li>
                    <li class="fragment"><strong>Numeric operations</strong> - INCR, DECR, mathematical functions</li>
                    <li class="fragment"><strong>String manipulation</strong> - APPEND, ranges, modification</li>
                    <li class="fragment"><strong>Batch operations</strong> - MSET, MGET for efficiency</li>
                    <li class="fragment"><strong>Key management</strong> - Naming conventions and organization</li>
                    <li class="fragment"><strong>TTL strategies</strong> - Automatic data expiration</li>
                    <li class="fragment"><strong>Memory optimization</strong> - Understanding storage efficiency</li>
                    <li class="fragment"><strong>Common patterns</strong> - Caching, counters, sessions</li>
                </ul>
            </section>

            <section>
                <h3>Ready for Hands-On Practice</h3>
                <div class="highlight-box">
                    <p><strong>Next:</strong> Put these concepts into practice with real data management scenarios</p>
                </div>
                <ul>
                    <li>Implement key naming strategies</li>
                    <li>Build counter and caching systems</li>
                    <li>Practice TTL management</li>
                    <li>Monitor performance and memory usage</li>
                </ul>
            </section>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.js"></script>
    <script>
        Reveal.initialize({
            hash: true,
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade'
        });
    </script>
</body>
</html>