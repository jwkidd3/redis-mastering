<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/theme/white.css">
    <style>
        .reveal h1, .reveal h2, .reveal h3 {
            text-transform: none;
            font-weight: 600;
        }
        .reveal .slides section {
            text-align: left;
            padding: 20px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        .title-slide {
            background-color: #f8f9fa;
            color: #333;
            text-align: center !important;
            padding: 40px;
            justify-content: center;
        }
        .section-header {
            background-color: #f8f9fa;
            color: #333;
            text-align: center !important;
            padding: 30px;
            justify-content: center;
        }
        .lab-callout {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center !important;
            padding: 40px;
            border-radius: 10px;
            justify-content: center;
        }
        .lab-callout h2 {
            color: white;
            margin-bottom: 20px;
        }
        .lab-callout p {
            font-size: 1.2em;
            margin: 10px 0;
        }
        .highlight-box {
            background-color: #e8f4fd;
            border-left: 4px solid #007acc;
            padding: 15px;
            margin: 15px 0;
        }
        .code-snippet {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            margin: 10px 0;
            overflow-x: auto;
        }
        .command {
            color: #66d9ef;
        }
        .key {
            color: #a6e22e;
        }
        .value {
            color: #e6db74;
        }
        .comment {
            color: #75715e;
        }
        ul, ol {
            font-size: 0.9em;
            line-height: 1.4;
            margin-left: 20px;
        }
        .reveal .slides section .fragment {
            margin-bottom: 10px;
        }
        .two-column {
            display: flex;
            gap: 30px;
        }
        .column {
            flex: 1;
        }
        .reveal {
            font-size: 36px;
        }
        .reveal h1 {
            font-size: 2em;
        }
        .reveal h2 {
            font-size: 1.5em;
        }
        .reveal h3 {
            font-size: 1.2em;
        }
        .reveal .slides {
            text-align: left;
        }
        table {
            font-size: 0.8em;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <!-- Title Slide -->
            <section class="title-slide">
                <h1>Set & Sorted Set Applications for Analytics</h1>
                <h3>Content 5: Advanced Data Structures</h3>
                <p><strong>Duration:</strong> 45 minutes</p>
                <p><strong>Focus:</strong> Sets and Sorted Sets for Business Analytics</p>
            </section>

            <!-- Section 1: Introduction to Sets -->
            <section class="section-header">
                <h2>Redis Sets</h2>
                <p>Unordered Collections of Unique Elements</p>
            </section>

            <section>
                <h3>What are Redis Sets?</h3>
                <div class="highlight-box">
                    <p>Sets are unordered collections that automatically handle uniqueness</p>
                </div>
                <ul>
                    <li class="fragment">No duplicate members allowed</li>
                    <li class="fragment">O(1) add, remove, and membership check</li>
                    <li class="fragment">Support for set operations (union, intersection, difference)</li>
                    <li class="fragment">Perfect for tracking unique items</li>
                    <li class="fragment">Maximum 2^32 - 1 members per set</li>
                </ul>
            </section>

            <section>
                <h3>Basic Set Operations</h3>
                <div class="code-snippet">
<span class="comment"># Adding members to a set</span>
<span class="command">SADD</span> <span class="key">active:users</span> <span class="value">"user:1001" "user:1002" "user:1003"</span>

<span class="comment"># Check if member exists</span>
<span class="command">SISMEMBER</span> <span class="key">active:users</span> <span class="value">"user:1001"</span>

<span class="comment"># Get all members</span>
<span class="command">SMEMBERS</span> <span class="key">active:users</span>

<span class="comment"># Get set size</span>
<span class="command">SCARD</span> <span class="key">active:users</span>

<span class="comment"># Remove members</span>
<span class="command">SREM</span> <span class="key">active:users</span> <span class="value">"user:1003"</span>
                </div>
            </section>

            <section>
                <h3>Set Operations for Analytics</h3>
                <div class="code-snippet">
<span class="comment"># Users who purchased product A</span>
<span class="command">SADD</span> <span class="key">buyers:productA</span> <span class="value">"user:101" "user:102" "user:103"</span>

<span class="comment"># Users who purchased product B</span>
<span class="command">SADD</span> <span class="key">buyers:productB</span> <span class="value">"user:102" "user:104" "user:105"</span>

<span class="comment"># Users who bought both (intersection)</span>
<span class="command">SINTER</span> <span class="key">buyers:productA buyers:productB</span>

<span class="comment"># Users who bought either (union)</span>
<span class="command">SUNION</span> <span class="key">buyers:productA buyers:productB</span>

<span class="comment"># Users who bought A but not B (difference)</span>
<span class="command">SDIFF</span> <span class="key">buyers:productA buyers:productB</span>
                </div>
            </section>

            <section>
                <h3>Practical Set Use Cases</h3>
                <div class="two-column">
                    <div class="column">
                        <h4>Tracking & Tagging</h4>
                        <ul>
                            <li>Unique visitors</li>
                            <li>Product categories</li>
                            <li>User permissions</li>
                            <li>Feature flags</li>
                        </ul>
                    </div>
                    <div class="column">
                        <h4>Analytics & Reporting</h4>
                        <ul>
                            <li>Customer segments</li>
                            <li>Coverage analysis</li>
                            <li>Fraud detection patterns</li>
                            <li>A/B test groups</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 2: Introduction to Sorted Sets -->
            <section class="section-header">
                <h2>Redis Sorted Sets</h2>
                <p>Ordered Collections with Scores</p>
            </section>

            <section>
                <h3>What are Sorted Sets?</h3>
                <div class="highlight-box">
                    <p>Unique elements ordered by associated score values</p>
                </div>
                <ul>
                    <li class="fragment">Each member has an associated score (float)</li>
                    <li class="fragment">Members are unique, scores can repeat</li>
                    <li class="fragment">Automatic ordering by score (low to high)</li>
                    <li class="fragment">O(log(N)) for most operations</li>
                    <li class="fragment">Perfect for leaderboards and rankings</li>
                </ul>
            </section>

            <section>
                <h3>Basic Sorted Set Operations</h3>
                <div class="code-snippet">
<span class="comment"># Add members with scores</span>
<span class="command">ZADD</span> <span class="key">leaderboard</span> <span class="value">1500 "agent:101" 2100 "agent:102" 1800 "agent:103"</span>

<span class="comment"># Get rank (0-based)</span>
<span class="command">ZRANK</span> <span class="key">leaderboard</span> <span class="value">"agent:102"</span>

<span class="comment"># Get top 3 agents</span>
<span class="command">ZREVRANGE</span> <span class="key">leaderboard</span> <span class="value">0 2 WITHSCORES</span>

<span class="comment"># Get agents with scores 1500-2000</span>
<span class="command">ZRANGEBYSCORE</span> <span class="key">leaderboard</span> <span class="value">1500 2000</span>

<span class="comment"># Increment score</span>
<span class="command">ZINCRBY</span> <span class="key">leaderboard</span> <span class="value">100 "agent:101"</span>
                </div>
            </section>

            <section>
                <h3>Advanced Sorted Set Queries</h3>
                <div class="code-snippet">
<span class="comment"># Remove lowest performers</span>
<span class="command">ZREMRANGEBYRANK</span> <span class="key">leaderboard</span> <span class="value">0 2</span>

<span class="comment"># Count members in score range</span>
<span class="command">ZCOUNT</span> <span class="key">leaderboard</span> <span class="value">1000 2000</span>

<span class="comment"># Get reverse rank (from highest)</span>
<span class="command">ZREVRANK</span> <span class="key">leaderboard</span> <span class="value">"agent:101"</span>

<span class="comment"># Lexicographical range (when scores are same)</span>
<span class="command">ZRANGEBYLEX</span> <span class="key">products</span> <span class="value">[aaa (zzz</span>

<span class="comment"># Union of multiple sorted sets</span>
<span class="command">ZUNIONSTORE</span> <span class="key">combined</span> <span class="value">2 set1 set2</span>
                </div>
            </section>

            <section>
                <h3>Sorted Set Analytics Patterns</h3>
                <table>
                    <tr>
                        <th>Use Case</th>
                        <th>Score Represents</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td>Leaderboards</td>
                        <td>Points/Score</td>
                        <td>Sales rankings</td>
                    </tr>
                    <tr>
                        <td>Time Series</td>
                        <td>Timestamp</td>
                        <td>Event logs</td>
                    </tr>
                    <tr>
                        <td>Priority Queues</td>
                        <td>Priority</td>
                        <td>Task scheduling</td>
                    </tr>
                    <tr>
                        <td>Geospatial</td>
                        <td>Distance</td>
                        <td>Nearest locations</td>
                    </tr>
                </table>
            </section>

            <!-- Section 3: Combining Sets and Sorted Sets -->
            <section class="section-header">
                <h2>Combining Sets & Sorted Sets</h2>
                <p>Advanced Analytics Patterns</p>
            </section>

            <section>
                <h3>Customer Segmentation Example</h3>
                <div class="code-snippet">
<span class="comment"># Track high-value customers (set)</span>
<span class="command">SADD</span> <span class="key">customers:premium</span> <span class="value">"cust:1001" "cust:1002"</span>

<span class="comment"># Track customer lifetime value (sorted set)</span>
<span class="command">ZADD</span> <span class="key">customers:ltv</span> <span class="value">50000 "cust:1001" 75000 "cust:1002"</span>

<span class="comment"># Find premium customers with LTV > 60000</span>
<span class="comment"># Step 1: Get high LTV customers</span>
<span class="command">ZRANGEBYSCORE</span> <span class="key">customers:ltv</span> <span class="value">60000 +inf</span>
<span class="comment"># Step 2: Check premium status</span>
<span class="command">SISMEMBER</span> <span class="key">customers:premium</span> <span class="value">"cust:1002"</span>
                </div>
            </section>

            <section>
                <h3>Real-Time Analytics Dashboard</h3>
                <div class="highlight-box">
                    <p>Combine Sets for filtering with Sorted Sets for ranking</p>
                </div>
                <div class="code-snippet">
<span class="comment"># Active regions (set)</span>
<span class="command">SADD</span> <span class="key">regions:active</span> <span class="value">"west" "east" "central"</span>

<span class="comment"># Sales by region (sorted set)</span>
<span class="command">ZADD</span> <span class="key">sales:byregion</span> <span class="value">125000 "west" 98000 "east"</span>

<span class="comment"># Product categories per customer (sets)</span>
<span class="command">SADD</span> <span class="key">customer:1001:categories</span> <span class="value">"electronics" "home"</span>

<span class="comment"># Revenue per category (sorted set)</span>
<span class="command">ZADD</span> <span class="key">revenue:bycategory</span> <span class="value">450000 "electronics"</span>
                </div>
            </section>

            <!-- Section 4: Performance Considerations -->
            <section class="section-header">
                <h2>Performance & Best Practices</h2>
                <p>Optimizing Set and Sorted Set Operations</p>
            </section>

            <section>
                <h3>Performance Characteristics</h3>
                <div class="two-column">
                    <div class="column">
                        <h4>Sets</h4>
                        <ul>
                            <li>SADD: O(N)</li>
                            <li>SREM: O(N)</li>
                            <li>SISMEMBER: O(1)</li>
                            <li>SINTER: O(N*M)</li>
                            <li>SUNION: O(N)</li>
                        </ul>
                    </div>
                    <div class="column">
                        <h4>Sorted Sets</h4>
                        <ul>
                            <li>ZADD: O(log(N))</li>
                            <li>ZREM: O(log(N))</li>
                            <li>ZRANGE: O(log(N)+M)</li>
                            <li>ZRANK: O(log(N))</li>
                            <li>ZSCORE: O(1)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section>
                <h3>Memory Optimization Tips</h3>
                <ul>
                    <li class="fragment"><strong>Sets:</strong> Use intsets for small integer sets (&lt;512 entries)</li>
                    <li class="fragment"><strong>Sorted Sets:</strong> Use ziplist for small sets (&lt;128 entries)</li>
                    <li class="fragment"><strong>Naming:</strong> Use consistent, hierarchical key patterns</li>
                    <li class="fragment"><strong>Cleanup:</strong> Set TTL on temporary analytics sets</li>
                    <li class="fragment"><strong>Batching:</strong> Use SADD/ZADD with multiple members</li>
                    <li class="fragment"><strong>Pagination:</strong> Use ZSCAN for large sorted sets</li>
                </ul>
            </section>

            <section>
                <h3>Common Analytics Patterns</h3>
                <div class="highlight-box">
                    <p>Real-world applications for business intelligence</p>
                </div>
                <ul>
                    <li class="fragment"><strong>Unique Metrics:</strong> Daily active users, unique visitors</li>
                    <li class="fragment"><strong>Rankings:</strong> Sales leaderboards, performance metrics</li>
                    <li class="fragment"><strong>Recommendations:</strong> Similar products, related items</li>
                    <li class="fragment"><strong>Real-time Stats:</strong> Live dashboards, trending topics</li>
                    <li class="fragment"><strong>Scoring Systems:</strong> Risk scores, credit ratings</li>
                </ul>
            </section>

            <!-- Lab Callout -->
            <section class="lab-callout">
                <h2>🚀 Upcoming Labs</h2>
                <p><strong>Labs 9-10: Analytics & Advanced Patterns</strong></p>
                <p>⏱️ Duration: 90 minutes</p>
                <p style="margin-top: 30px;">Apply Sets and Sorted Sets to build:</p>
                <ul style="list-style: none; text-align: center;">
                    <li>✓ Real-time leaderboards</li>
                    <li>✓ Customer segmentation systems</li>
                    <li>✓ Analytics dashboards</li>
                    <li>✓ Recommendation engines</li>
                </ul>
            </section>

            <!-- Summary -->
            <section class="section-header">
                <h2>Key Takeaways</h2>
                <p>Essential concepts for analytics with Redis</p>
            </section>

            <section>
                <h3>What We've Covered</h3>
                <ul>
                    <li class="fragment"><strong>Sets:</strong> Unique collections for membership and operations</li>
                    <li class="fragment"><strong>Set Operations:</strong> Union, intersection, difference for analytics</li>
                    <li class="fragment"><strong>Sorted Sets:</strong> Scored rankings and leaderboards</li>
                    <li class="fragment"><strong>Range Queries:</strong> By rank, score, and lexicographical order</li>
                    <li class="fragment"><strong>Analytics Patterns:</strong> Segmentation, scoring, real-time stats</li>
                    <li class="fragment"><strong>Performance:</strong> Understanding complexity and optimization</li>
                    <li class="fragment"><strong>Best Practices:</strong> Memory efficiency and key design</li>
                </ul>
                <div class="highlight-box" style="margin-top: 20px;">
                    <p><strong>Next:</strong> Hands-on implementation of analytics systems</p>
                </div>
            </section>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.js"></script>
    <script>
        Reveal.initialize({
            hash: true,
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade',
            width: 1920,
            height: 1080,
            margin: 0.04,
            minScale: 0.2,
            maxScale: 2.0,
            center: false
        });
    </script>
</body>
</html>